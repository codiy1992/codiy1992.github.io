<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>自建服务 on Notebook</title><link>https://note.codiy.net/docs/selfhosted/</link><description>Recent content in 自建服务 on Notebook</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://note.codiy.net/docs/selfhosted/index.xml" rel="self" type="application/rss+xml"/><item><title>1. 基础设施(基于家庭网络)</title><link>https://note.codiy.net/docs/2022/01/in-home-server-infrastructure/</link><pubDate>Wed, 05 Jan 2022 17:30:19 +0800</pubDate><guid>https://note.codiy.net/docs/2022/01/in-home-server-infrastructure/</guid><description>概述 基于家庭网络使用工控机、NAS 自建各种服务/系统. 如 ESXi, PVE, ROS, OpenWrt, bitwarden, minio, jackett, qBittorrent 等.
基础设施:
宽带与光猫 工控机(IPC, 软路由) 虚拟机系统(ESXi, PVE) 路由器系统(RouterOS, OpenWrt) NAS设备 相关网络基础知识
路由 网关 ARP协议 交换机 网桥 DNS, DHCP, NAT 宽带与光猫 光猫由路由模式设置为桥接模式(自己设置不了就打给客服) 拨号发现为局域网IP, 打给客服要求分配公网IP(一般不需要理由，要的话就说家里装监控需要公网IP) 拨号账号账号密码, 光猫管理员账号密码 宽带是否支持多拨(多次拨号，可获得多个公网IP) 家庭宽带拨号获得的公网IP, 运营商一般默认屏蔽了80, 443端口
工控机(Industrial Mini PC) 选购工控机
CPU: J4125 网卡 i210 or i211 千兆网卡 内存条 存储 ESXi, PVE 官网镜像下载, ventoy 制作启动U盘 开机进 BIOS 选择引导方式优先级 进入 ESXi 安装界面, 快速按 Shift + o, 输入命令 限制缓存用的磁盘大小 安装完后, 管理网口选到 eht0, 然后设置IP地址 用网线将 eth0 与电脑连接。 电脑上设置IPV4属性，使得可以桥接到 ESXi.</description></item><item><title>Caddy Usage</title><link>https://note.codiy.net/docs/2022/01/caddy-usage/</link><pubDate>Sun, 16 Jan 2022 11:59:15 +0800</pubDate><guid>https://note.codiy.net/docs/2022/01/caddy-usage/</guid><description>Build your own caddy images Dockerfile:
FROMcaddy:builder AS builderRUN xcaddy build \ --with github.com/caddy-dns/alidnsFROMcaddyCOPY --from=builder /usr/bin/caddy /usr/bin/caddyCaddy TLS Settings Caddyfile Syntax:
tls [internal|&amp;lt;email&amp;gt;] | [&amp;lt;cert_file&amp;gt; &amp;lt;key_file&amp;gt;] { protocols &amp;lt;min&amp;gt; [&amp;lt;max&amp;gt;] ciphers &amp;lt;cipher_suites...&amp;gt; curves &amp;lt;curves...&amp;gt; alpn &amp;lt;values...&amp;gt; load &amp;lt;paths...&amp;gt; ca &amp;lt;ca_dir_url&amp;gt; ca_root &amp;lt;pem_file&amp;gt; key_type ed25519|p256|p384|rsa2048|rsa4096 dns &amp;lt;provider_name&amp;gt; [&amp;lt;params...&amp;gt;] resolvers &amp;lt;dns_servers...&amp;gt; eab &amp;lt;key_id&amp;gt; &amp;lt;mac_key&amp;gt; on_demand client_auth { mode [request|require|verify_if_given|require_and_verify] trusted_ca_cert &amp;lt;base64_der&amp;gt; trusted_ca_cert_file &amp;lt;filename&amp;gt; trusted_leaf_cert &amp;lt;base64_der&amp;gt; trusted_leaf_cert_file &amp;lt;filename&amp;gt; } issuer &amp;lt;issuer_name&amp;gt; [&amp;lt;params...&amp;gt;] } 常见配置方式 Caddy Automatic Https</description></item></channel></rss>